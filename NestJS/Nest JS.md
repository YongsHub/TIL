# Nest JS

Node JS ì„œë²„ ì¸¡ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ í”„ë ˆì„ ì›Œí¬ í”„ë¡œê·¸ë ˆì‹œë¸Œ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ê³  TypeScriptë¡œ ë¹Œë“œë˜ê³  ì™„ë²½í•˜ê²Œ ì§€ì›í•˜ë©° OOP, FP, FRP ìš”ì†Œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

## â—ï¸ ë‚´ë¶€?

ë‚´ë¶€ì ìœ¼ë¡œ Express Frameworkì™€ ê°™ì€ ê°•ë ¥í•œ HTTP ì„œë²„ í”„ë ˆì„ ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ë©° ì„ íƒì ìœ¼ë¡œ Fastifyë¥¼ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.

## ì² í•™

Nodeë¥¼ ìœ„í•œ í›Œë¥­í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬, ë„ìš°ë¯¸ ë° ë„êµ¬ê°€ ë§ì´ ì¡´ì¬í•˜ì§€ë§Œ ì´ë“¤ ì¤‘ ì–´ëŠ ê²ƒë„ ì•„í‚¤í…ì²˜ì˜ ì£¼ìš” ë¬¸ì œë¥¼ íš¨ê³¼ì ìœ¼ë¡œ í•´ê²°í•˜ì§€ ëª»í•¨.

Nest -> ê°œë°œìì™€ íŒ€ì´ ê³ ë„ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•˜ê³  í™•ì¥ ê°€ëŠ¥í•˜ë©° ëŠìŠ¨í•˜ê²Œ ê²°í•©ë˜ê³  ìœ ì§€ ê´€ë¦¬ê°€ ì‰¬ìš´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì²˜ë¥¼ ì œê³µí•¨.

## Nest JS CLIë¡œ Nest JS ì‹œì‘

```shell
npm i -g @nestjs/cli

nest new project-name
ë˜ëŠ” í˜„ì¬ ìœ„ì¹˜í•œ í´ë” ë‚´ ì„¤ì •ì€
nest new ./
```

## ğŸ‘¨â€ğŸ’» ê°„ë‹¨í•œ CRUD Model ë§Œë“¤ê¸°

- ê²Œì‹œíŒì„ ë§Œë“¤ê¸° ë•Œë¬¸ì— ê²Œì‹œê¸€ì— ê´€í•œ ëª¨ë“ˆê³¼ ê²Œì‹œê¸€ì„ ë§Œë“œëŠ” ì‚¬ëŒì— ëŒ€í•œ ì¸ì¦ ëª¨ë“ˆì´ í•„ìš”í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ê° ëª¨ë“ˆì„ êµ¬ì„±í•˜ëŠ” Controller, Service, Repository ë“±ì´ ìˆëŠ”ë° ì´ëŸ¬í•œ ìš©ì–´ëŠ” Expressë¥¼ ì‚¬ìš©í•  ë•Œë„ ë“¤ì–´ë³´ì•˜ì„ ìˆ˜ ìˆì§€ë§Œ Nest JSì—ì„œëŠ” ì–´ë– í•œ ìš©ë„ë¡œ ì‚¬ìš©ë˜ëŠ”ì§€ í•˜ë‚˜ì”© ì•Œì•„ë³´ì

## ğŸ“Œ Nest JS ê¸°ë³¸ êµ¬ì¡° ì„¤ëª…

- eslintrc.js : ê°œë°œìë“¤ì´ íŠ¹ì •í•œ ê·œì¹™ì„ ê°€ì§€ê³  ì½”ë“œë¥¼ ê¹”ë”í•˜ê²Œ ì§¤ìˆ˜ìˆê²Œ ë„ì™€ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
- prettierrc : ì£¼ë¡œ ì½”ë“œ í˜•ì‹ì„ ë§ì¶”ëŠ”ë° ì‚¬ìš©í•œë‹¤. ì‘ì€ ë”°ì˜´í‘œë¥¼ ì‚¬ìš©í• ì§€ í° ë”°ì˜´í‘œë¥¼ ì‚¬ìš©í• ì§€ -> Code Formatter ì—­í• 
- nest-cli.json : nest í”„ë¡œì íŠ¸ë¥¼ ìœ„í•´ íŠ¹ì •í•œ ì„¤ì •ì„ í•  ìˆ˜ ìˆëŠ” json íŒŒì¼
- tsconfig.json : ì–´ë–»ê²Œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì»´íŒŒì¼ í• ì§€ ì„¤ì •
- tsconfig.build.json : tsconfig.jsonì˜ ì—°ì¥ì„ ìƒ íŒŒì¼ì´ë©° buildí•  ë•Œ í•„ìš”í•œ ì„¤ì •ë“¤ "excludes"ì—ì„œ ë¹Œë“œí•  ë•Œ í•„ìš” ì—†ëŠ” íŒŒì¼ë“¤ ì‘ì„±
- package.json : build -> ìš´ì˜í™˜ê²½ì„ ìœ„í•œ ë¹Œë“œ, format: ë¦°íŠ¸ì—ëŸ¬ê°€ ë‚¬ì„ì§€ ìˆ˜ì • start: ì•± ì‹œì‘

## Controllerë€

> controllerëŠ” ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì— ì‘ë‹µì„ ë°˜í™˜í•œë‹¤. @Controller ë°ì½”ë ˆì´í„°ë¡œ í´ë˜ìŠ¤ë¥¼ ë°ì½”ë ˆì´ì…˜í•˜ì—¬ ì •ì˜ë©ë‹ˆë‹¤.

## Handlerë€

> í•¸ë“¤ëŸ¬ëŠ” @Get, @Post, @Delete ë“±ê³¼ ê°™ì€ ë°ì½”ë ˆì´í„°ë¡œ ì¥ì‹ ëœ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ ë‚´ì˜ ë‹¨ìˆœí•œ ë©”ì„œë“œì…ë‹ˆë‹¤.

## Serviceë€

> Service ì•ˆì—ì„œëŠ” ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ëœ ë¡œì§ì„ ì²˜ë¦¬í•˜ê² ìŠµë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê±°ë‚˜ ë°ì´í„°ë² ì´ìŠ¤ì•ˆì— ê²Œì‹œíŒ ìƒì„±í• ë•Œ ê·¸ ìƒì„±í•œ ê²Œì‹œíŒ ì •ë³´ë¥¼ ë„£ì–´ì£¼ëŠ” ë“±ì˜ ë¡œì§ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì´ ìƒì„±ëœ íŒŒì¼ ì•ˆì—ëŠ” Injectable ë°ì½”ë ˆì´í„°ê°€ ìˆìœ¼ë©° ì´ Nest JSëŠ” ì´ê²ƒì„ ì´ìš©í•´ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì´ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ Injectableë§Œë“¤ì–´ì¤ë‹ˆë‹¤.

## Providerë€ ?

> í”„ë¡œë°”ì´ë”ëŠ” Nestì˜ ê¸°ë³¸ ê°œë…. ëŒ€ë¶€ë¶„ ê¸°ë³¸ Nest í´ë˜ìŠ¤ëŠ” ì„œë¹„ìŠ¤, ë¦¬í¬ì§€í† ë¦¬, íŒ©í† ë¦¬, í—¬í¼ ë“± í”„ë¡œë°”ì´ë”ë¡œ ì·¨ê¸‰ë  ìˆ˜ ìˆë‹¤. í”„ë¡œë°”ì´ë”ì˜ ì£¼ìš” ì•„ì´ë””ì–´ëŠ” ì¢…ì†ì„±ìœ¼ë¡œ ì£¼ì…í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ì¦‰, ê°ì²´ëŠ” ì„œë¡œ ë‹¤ì–‘í•œ ê´€ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìœ¼ë©° ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ "ì—°ê²°"í•˜ëŠ” ê¸°ëŠ¥ì€ ëŒ€ë¶€ë¶„ Nest ëŸ°íƒ€ì„ ì‹œìŠ¤í…œì— ìœ„ì„ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## uuid ëª¨ë“ˆ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ

> npm install uuid --saveë¥¼ ì´ìš©í•´ì„œ ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤. ê·¸ í›„ì— uuid ëª¨ë“ˆì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì›í•˜ëŠ” ê³³ì—ì„œ import í•´ì¤€ë‹¤. import {v1 as uuid} from 'uuid';

## DTO (Data Transfer Object)

> ê³„ì¸µ ê°„ ë°ì´í„° êµí™˜ì„ ìœ„í•œ ê°ì²´ì´ë‹¤. DBì—ì„œ ë°ì´í„°ë¥¼ ì–»ì–´ Serviceë‚˜ Controller ë“±ìœ¼ë¡œ ë³´ë‚¼ ë•Œ ì‚¬ìš©í•˜ëŠ” ê°ì²´ë¥¼ ë§í•©ë‹ˆë‹¤. DTOëŠ” ë°ì´í„°ê°€ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ì „ì†¡ë˜ëŠ” ë°©ë²•ì„ ì •ì˜í•˜ëŠ” ê°ì²´ì…ë‹ˆë‹¤. Interfaceë‚˜ classë¥¼ ì´ìš©í•´ì„œ ì •ì˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## DTOë¥¼ ì“°ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€?

> ë°ì´í„° ìœ íš¨ì„±ì„ ì²´í¬í•˜ëŠ”ë° íš¨ìœ¨ì ì´ë‹¤. ë” ì•ˆì •ì ì¸ ì½”ë“œë¥¼ ë§Œë“¤ì–´ ì£¼ê³  íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ íƒ€ì…ìœ¼ë¡œë„ ì‚¬ìš©.

> ê²Œì‹œíŒì—ì„œ titleê³¼ descriptionì˜ propertyê°™ì€ ê²½ìš°ëŠ” ê°œìˆ˜ê°€ ì ê¸° ë•Œë¬¸ì— í¸í•˜ê² ì§€ë§Œ ì •ë§ ë§ì€ í”„ë¡œí¼í‹°ë¥¼ ê°–ê³  ì—¬ëŸ¬êµ°ë°ì—ì„œ ì´ìš©í•˜ë©° ê°‘ìê¸° í•œ ê³³ì—ì„œ Property ì´ë¦„ì„ ë°”ê¿”ì¤˜ì•¼í•œë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ? ì´ë ‡ê²Œ ë˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ ì§€ë³´ìˆ˜í•˜ê¸° í˜ë“¤ì–´ì§ˆ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ DTOë¥¼ ì´ìš©í•˜ì!

## PIPEëŠ” ë¬´ì—‡ì¸ê°€?

> @Injectable ë°ì½”ë ˆì´í„°ë¡œ ì£¼ì„ì´ ë‹¬ë¦° í´ë˜ìŠ¤ì…ë‹ˆë‹¤. íŒŒì´í”„ëŠ” data transformation ê³¼ data validationì„ ìœ„í•´ ì‚¬ìš©í•©ë‹ˆë‹¤. íŒŒì´í”„ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ ê²½ë¡œ ì²˜ë¦¬ê¸°ì— ì˜í•´ ì²˜ë¦¬ë˜ëŠ” ì¸ìˆ˜ì— ëŒ€í•´ ì‘ë™í•©ë‹ˆë‹¤. NestëŠ” ë©”ì†Œë“œê°€ í˜¸ì¶œë˜ê¸° ì§ì „ì— íŒŒì´í”„ë¥¼ ì‚½ì…í•˜ê³  íŒŒì´í”„ëŠ” ë©”ì†Œë“œë¡œ í–¥í•˜ëŠ” ì¸ìˆ˜ë¥¼ ìˆ˜ì‹ í•˜ê³  ì´ì— ì‘ë™í•¨.

## PIPE ì‚¬ìš©í•˜ëŠ” ë²•

> Handler - level Pipe, Parameter - level Pipe, Global - level Pipe 3ê°€ì§€ ë°©ë²•ì´ ì¡´ì¬í•©ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” PIPEëŠ” 6ê°€ì§€ê°€ ì¡´ì¬í•œë‹¤.
